if(window.width > 991){
	window.location = 'index.html'
}

bigJson = {'shaper': {'Fragment of Knowledge': {'dropChance': 50.0, 'uberDrop': 0.0, 'chaosValue' : 0}, 'Fragment of Shape': {'dropChance': 50.0,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Shapers Touch': {'dropChance': 51.5,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Voidwalker': {'dropChance': 24.0,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Dying Sun': {'dropChance': 16.0,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Starforge': {'dropChance': 3.5,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Solstice Vigil': {'dropChance': 5.0,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Echoes of Creation': {'dropChance': 0.0,   'uberDrop': 10.47, 'chaosValue' : 0}, 'Sublime Vision': {'dropChance': 0.0,   'uberDrop': 4.0, 'chaosValue' : 0}, 'Cosmic Reliquary Key': {'dropChance': 0.0,   'uberDrop': 0.0, 'chaosValue' : 0}, 'Orb of Dominance': {'dropChance': 3.0,   'uberDrop': 3.0, 'chaosValue' : 0}, 'setCost': 0}, 'elder': {'Fragment of Terror': {'dropChance': 50.0,   'uberDrop': 0.0}, 'Fragment of Emptiness': {'dropChance': 50.0,   'uberDrop': 0.0}, 'Blasphemers Grasp': {'dropChance': 25.0,   'uberDrop': 0.0}, 'Cyclopean Coil': {'dropChance': 25.0,   'uberDrop': 0.0}, 'Nebuloch': {'dropChance': 10.0,   'uberDrop': 0.0}, 'Hopeshredder': {'dropChance': 10.0,   'uberDrop': 0.0}, 'Shimmeron': {'dropChance': 10.0,   'uberDrop': 0.0}, 'Any Impresence': {'dropChance': 20.0,   'uberDrop': 0.0}, 'Orb of Dominance': {'dropChance': 5.0,   'uberDrop': 5.0}, 'Watchers Eye': {'dropChance': 25.0, 'talentedDrop': 10.0, 'uberDrop': 0.0}, 'setCost': 0}, 'eater': {'The Gluttonous Tide': {'dropChance': 45.0,   'uberDrop': 0.0}, 'Inextricable Fate': {'dropChance': 33.0,   'uberDrop': 0.0}, 'Melding of the Flesh': {'dropChance': 5.0,   'uberDrop': 0.0}, 'Ashes of the Stars': {'dropChance': 2.0,   'uberDrop': 0.0}, 'Forbidden Flesh': {'dropChance': 8.0, 'talentedDrop': 2.0, 'uberDrop': 2.0}, 'Visceral Reliquary Key': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Exceptional Eldritch Ichor': {'dropChance': 40.0,   'uberDrop': 35.0}, 'setCost': 0}, 'exarch': {'The Annihilating Light': {'dropChance': 33.0,   'uberDrop': 0.0}, 'Dawnbreaker': {'dropChance': 33.0,   'uberDrop': 0.0}, 'Dissolution of the Flesh': {'dropChance': 10.0,   'uberDrop': 0.0}, 'Crystallised Omniscience': {'dropChance': 2.0,   'uberDrop': 0.0}, 'Forbidden Flame': {'dropChance': 8.0, 'talentedDrop': 2.0, 'uberDrop': 2.0}, 'Archive Reliquary Key': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Exceptional Eldritch Ember': {'dropChance': 40.0,   'uberDrop': 35.0}, 'setCost': 0}, 'atziri': {'Atziris Promise': {'dropChance': 67.97,   'uberDrop': 0.0}, 'Atziris Step': {'dropChance': 12.2,   'uberDrop': 0.0}, 'Doryanis Catalyst': {'dropChance': 4.58,   'uberDrop': 0.0}, 'Atziris Disfavour': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Triumvirate Authority': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Doryanis Invitation': {'dropChance': 15.25,   'uberDrop': 0.0}, 'Mortal Grief': {'dropChance': 15.47,   'uberDrop': 0.0}, 'Mortal Ignorance': {'dropChance': 10.68,   'uberDrop': 0.0}, 'Mortal Hope': {'dropChance': 5.23,   'uberDrop': 0.0}, 'Mortal Rage': {'dropChance': 10.02,   'uberDrop': 0.0}, 'Sacrificial Garb': {'dropChance': 0.0,   'uberDrop': 0.0}, 'setCost': 0}, 'uber elder': {'Mark of the Shaper': {'dropChance': 30.0,   'uberDrop': 0.0}, 'Mark of the Elder': {'dropChance': 30.0,   'uberDrop': 0.0}, 'Indigon': {'dropChance': 16.88,   'uberDrop': 0.0}, 'Call of the Void': {'dropChance': 0.0,   'uberDrop': 14.0}, 'Voidfletcher': {'dropChance': 14.0,   'uberDrop': 0.0}, 'Disintegrator': {'dropChance': 7.5,   'uberDrop': 0.0}, 'Voidforge': {'dropChance': 3.0,   'uberDrop': 2.0}, 'The Eternity Shroud': {'dropChance': 2.0,   'uberDrop': 0.0}, 'Any Double Impresence': {'dropChance': 0.0,   'uberDrop': 2.0}, 'Soul Ascension': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Decaying Reliquary Key': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Watchers Eye': {'dropChance': 25.0, 'talentedDrop': 10.0, 'uberDrop': 0.0}, 'Sublime Vision': {'dropChance': 0.0,   'uberDrop': 4.0}, 'Orb of Dominance': {'dropChance': 5.0, 'talentedDrop': 5.0, 'uberDrop': 0.0}, 'setCost': 0}, 'uber atziri': {'Atziris Acuity': {'dropChance': 3.48,   'uberDrop': 0.0}, 'Atziris Reflection': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Atziris Rule': {'dropChance': 0.0,   'uberDrop': 0.0}, 'The Vertex': {'dropChance': 46.52,   'uberDrop': 0.0}, 'Triumvirate Authority': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Atziris Splendour': {'dropChance': 37.81,   'uberDrop': 0.0}, 'Pledge of Hands': {'dropChance': 2.0,   'uberDrop': 0.0}, 'Sacrificial Garb': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Victorious Fate': {'dropChance': 0.0,   'uberDrop': 0.0}, 'setCost': 0}, 'maven': {'Legacy of Fury': {'dropChance': 26.15,   'uberDrop': 0.0}, 'Viridis Veil': {'dropChance': 16.92,   'uberDrop': 0.0}, 'Arns Anguish': {'dropChance': 24.62,   'uberDrop': 0.0}, 'Gravens Secret': {'dropChance': 16.92,   'uberDrop': 0.0}, 'Olesyas Delight': {'dropChance': 12.31,   'uberDrop': 0.0}, 'Impossible Escape': {'dropChance': 10.0,   'uberDrop': 0.0}, 'Doppelgänger Guise': {'dropChance': 2.44,   'uberDrop': 0.0}, 'Awakened Exceptional Support Gems': {'dropChance': 0.0,   'uberDrop': 4.0}, 'Shiny Reliquary Key': {'dropChance': 2.36,   'uberDrop': 0.0}, 'Elevated Sextant': {'dropChance': 49.23,   'uberDrop': 50.77}, 'Orb of Conflict': {'dropChance': 30.0, 'talentedDrop': 37.5, 'uberDrop': 0.0}, 'Awakened Support Gems': {'dropChance': 55.0, 'talentedDrop': 13.0, 'uberDrop': 0.0}, 'setCost': 0}, 'sirus': {'Crown of the Inward Eye': {'dropChance': 38.0,   'uberDrop': 0.0}, 'Hands of the High Templar': {'dropChance': 34.72,   'uberDrop': 0.0}, 'Thread of Hope (small - very large)': {'dropChance': 20.0,   'uberDrop': 0.0}, 'The Burden of Truth': {'dropChance': 15.0,   'uberDrop': 0.0}, 'The Saviour': {'dropChance': 2.0,   'uberDrop': 0.0}, 'Thread of Hope (massive)': {'dropChance': 0.0,   'uberDrop': 2.0}, 'Oubliette Reliquary Key': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Awakened Support Gems': {'dropChance': 0.0,   'uberDrop': 0.0}, 'Orb of Dominance': {'dropChance': 3.0,   'uberDrop': 0.0}, 'Awakeners Orb': {'dropChance': 20.0,   'uberDrop': 0.0}, 'setCost': 0}};
var currentLeague = "Crucible";
var divineChaosValue = 150;





async function calculateAverageAwakenedGem(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=gem&gemLevel=1";
	fetch(url).then(response => response.json()).then(result => {	
		var awaTotal = 0;
		var awaSupTotal = 0;
		var counter = 0;
		var counter2 = 0;
		for(var i = 0; i<result.length;i++){
			if(result[i].name.includes('Awakened')){
				if(result[i].name != "Awakened Enhance Support" && result[i].name != "Awakened Empower Support" && result[i].name != "Awakened Enlighten Support"){
					counter+=1;
					awaTotal+= result[i].mean;
				}else{
					awaSupTotal+=result[i].mean;
					counter2+=1;
				}
			}
		}
		bigJson['maven']['Awakened Support Gems'].chaosValue = (awaTotal/counter).toFixed(2);
		bigJson['sirus']['Awakened Support Gems'].chaosValue = (awaTotal/counter).toFixed(2);
		bigJson['maven']['Awakened Exceptional Support Gems'].chaosValue = (awaSupTotal/counter2).toFixed(2);
	})
};



async function getFragmentValues(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=fragment";
	fetch(url).then(response => response.json()).then(result => {	
		for(var i = 0; i<result.length;i++){
			//Fragment of the Minotaur id = 47
			//Fragment of the Phoenix id = 366
			//Fragment of the Hydra id = 367
			//Fragment of the Chimera id = 368
			if(result[i].id == 47 || result[i].id == 366 || result[i].id == 367 || result[i].id == 368){
				//invitationJson["The Formed"][0] = {"name:":"Fragment of the Minotaur", "chaosValue":result[i].mean};;
				bigJson['shaper'].setCost += result[i].mean;
			}
			//Fragment of Enslavement id = 2871
			//Fragment of Purification id = 30
			//Fragment of Eradication id = 3474
			//Fragment of Constriction id = 426
			if(result[i].id == 2871 || result[i].id == 30 || result[i].id == 3474 || result[i].id == 426){
				bigJson['elder'].setCost += result[i].mean;
			}
			//Crest Al-Hezim 45881
			//Crest Veritania 45882
			//Crest Drox 45883
			//Crest Baran 45917
			if(result[i].id == 45881 || result[i].id == 45882 || result[i].id == 45883 || result[i].id == 45917){
				bigJson['sirus'].setCost += result[i].mean;
			}
			//Maven's writ 35735
			if(result[i].id == 35735){
				bigJson['maven'].setCost = result[i].mean;
			}
			//Fragment of Knowledge 1292
			if(result[i].id == 1292){
				bigJson['shaper']['Fragment of Knowledge'].chaosValue = result[i].mean;
				bigJson['uber elder'].setCost += result[i].mean;
			}
			//Fragment of Shape 1293
			if(result[i].id == 1293){
				bigJson['shaper']['Fragment of Shape'].chaosValue = result[i].mean;
				bigJson['uber elder'].setCost += result[i].mean;
			}
			//Fragment of Emptiness 1995
			if(result[i].id == 1995){
				bigJson['elder']['Fragment of Emptiness'].chaosValue = result[i].mean;
				bigJson['uber elder'].setCost += result[i].mean;
			}
			//Fragment of Terror 2566
			if(result[i].id == 2566){
				bigJson['elder']['Fragment of Terror'].chaosValue = result[i].mean;
				bigJson['uber elder'].setCost += result[i].mean;
			}

			// 420 Sacrifice of Dusk
			//698 Sac of Dawn
			// 841 Sac of Midnight
			//843 Sac of Noon
			if(result[i].id == 420 || result[i].id == 698 || result[i].id == 841 || result[i].id == 843){
				bigJson['atziri'].setCost += result[i].mean;
			}
			// 180 Mortal Rage
			if(result[i].id == 180){
				bigJson['atziri']['Mortal Rage'].chaosValue = result[i].mean;
				bigJson['uber atziri'].setCost += result[i].mean;
			}
			//422 Mortal Hope
			if(result[i].id == 422){
				bigJson['atziri']['Mortal Hope'].chaosValue = result[i].mean;
				bigJson['uber atziri'].setCost += result[i].mean;
			}
			// 424 Mortal Ignorance
			if(result[i].id == 424){
				bigJson['atziri']['Mortal Ignorance'].chaosValue = result[i].mean;
				bigJson['uber atziri'].setCost += result[i].mean;
			}
			// 692 Mortal Grief
			if(result[i].id == 692){
				bigJson['atziri']['Mortal Grief'].chaosValue = result[i].mean;
				bigJson['uber atziri'].setCost += result[i].mean;
			}


		}


	})
};
async function getCurrencyValues(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=currency";
	fetch(url).then(response => response.json()).then(result => {
			for(var i = 0; i<result.length;i++){
				// Divine id = 56
				if(result[i].id == 56){					
					divineChaosValue = result[i].mean;
					document.getElementById('DivToChaos').innerHTML = divineChaosValue;
				}
				//Orb of Dominance id = 45848
				if(result[i].id == 45848){
					bigJson['shaper']["Orb of Dominance"].chaosValue = result[i].mean;
					bigJson['elder']["Orb of Dominance"].chaosValue = result[i].mean;
					bigJson['sirus']["Orb of Dominance"].chaosValue = result[i].mean;
					bigJson['uber elder']["Orb of Dominance"].chaosValue = result[i].mean;
				}
				// Awakener's Orb id = 49
				if(result[i].id == 49){
					bigJson['sirus']["Awakeners Orb"].chaosValue = result[i].mean;
				}

				// 45849 Orb of Conflict
				if(result[i].id == 45849){
					bigJson['maven']["Orb of Conflict"].chaosValue = result[i].mean;
				}
				// 35647 Elevated sextant
				if(result[i].id == 35647){
					bigJson['maven']["Elevated Sextant"].chaosValue = result[i].mean;
				}
				// 45863 Exceptional Eldritch Ichor
				if(result[i].id == 45863){
					bigJson['eater']["Exceptional Eldritch Ichor"].chaosValue = result[i].mean;
				}
				// 45851 Exceptional Eldritch Ember
				if(result[i].id == 45851){
					bigJson['exarch']["Exceptional Eldritch Ember"].chaosValue = result[i].mean;
				}
				// id: 47452, name: "Victorious Fate
				if(result[i].id == 47452){
					bigJson['uber atziri']["Victorious Fate"].chaosValue = result[i].mean;
				}
			}
		}
	);
};

async function getMapValues(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=map";
	fetch(url).then(response => response.json()).then(result => {
			for(var i = 0; i<result.length;i++){
				//incandestant invitation  45934 = exarch
				if(result[i].id == 45934){
					bigJson['exarch'].setCost = result[i].mean;
				}
				//Screaming Invitation 45954 = eater
				if(result[i].id == 45954){
					bigJson['eater'].setCost = result[i].mean;
				}
				// id: 47709, name: "Decaying Reliquary Key
				if(result[i].id == 47709){
					bigJson['uber elder']['Decaying Reliquary Key'].chaosValue = result[i].mean;
				}
				// id: 47700, name: "Visceral Reliquary Key
				if(result[i].id == 47700){
					bigJson['eater']['Visceral Reliquary Key'].chaosValue  = result[i].mean;
				}
				// id: 47679, name: "Oubliette Reliquary Key
				if(result[i].id == 47679){
					bigJson['sirus']['Oubliette Reliquary Key'].chaosValue  = result[i].mean;
				}
				//  id: 47666, name: "Archive Reliquary Key"
				if(result[i].id == 47666){
					bigJson['exarch']['Archive Reliquary Key'].chaosValue  = result[i].mean;
				}
				// id: 47548, name: "Shiny Reliquary Key"
				if(result[i].id == 47548){
					bigJson['maven']['Shiny Reliquary Key'].chaosValue  = result[i].mean;
				}
				//  id: 47689, name: "Cosmic Reliquary Key
				if(result[i].id == 47689){
					bigJson['shaper']['Cosmic Reliquary Key'].chaosValue  = result[i].mean;
				}
			}
		});
};

async function getJewelValues(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=jewel";
	fetch(url).then(response => response.json()).then(result => {
			for(var i = 0; i<result.length;i++){
				//unid watcher 85 47390
				if(result[i].id == 47390){
					bigJson['elder']['Watchers Eye'].chaosValue = result[i].mean;
				}
				//unid watcher 86 47391
				if(result[i].id == 47391){
					bigJson['uber elder']['Watchers Eye'].chaosValue = result[i].mean;
				}
				//id: 74, name: "Thread of Hope"
				if(result[i].id == 74){
					bigJson['sirus']['Thread of Hope (small - very large)'].chaosValue = result[i].mean;
				}
				//id: 45864, name: "Melding of the Flesh"
				if(result[i].id == 45864){
					bigJson['eater']['Melding of the Flesh'].chaosValue = result[i].mean;
				}
				// id: 45856, name: "Dissolution of the Flesh"
				if(result[i].id == 45856){
					bigJson['exarch']['Dissolution of the Flesh'].chaosValue = result[i].mean;
				}
				//id: 46478, name: "Impossible Escape
				if(result[i].id == 46478){
					bigJson['maven']['Impossible Escape'].chaosValue = result[i].mean;
				}
				// id: 46487, name: "Sublime Vision",
				if(result[i].id == 46487){
					bigJson['shaper']['Sublime Vision'].chaosValue = result[i].mean;
					bigJson['uber elder']['Sublime Vision'].chaosValue = result[i].mean;
				}
				// id: 45857, name: "Forbidden Flame
				if(result[i].id == 45857){
					bigJson['exarch']['Forbidden Flame'].chaosValue = result[i].mean;
				}
				// id: 45871, name: "Forbidden Flesh
				if(result[i].id == 45871){
					bigJson['eater']['Forbidden Flesh'].chaosValue = result[i].mean;
				}
			}
		});


};

async function getUniqueArmorValues(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=armour";
	fetch(url).then(response => response.json()).then(result => {
			for(var i = 0; i<result.length;i++){
				// id: 957 Blasphemer's Grasp
				if(result[i].id == 957){
					bigJson['elder']['Blasphemers Grasp'].chaosValue = result[i].mean;
				}
				//  id: 2640, name: "Indigon"
				if(result[i].id == 2640){
					bigJson['uber elder']['Indigon'].chaosValue = result[i].mean;
				}
				//  id: 1167, name: "Voidfletcher"
				if(result[i].id == 1167){
					bigJson['uber elder']['Voidfletcher'].chaosValue = result[i].mean;
				}
				//  id: 34773, name: "The Eternity Shroud",
				if(result[i].id == 34773){
					bigJson['uber elder']['The Eternity Shroud'].chaosValue = result[i].mean;
				}
				// id: 390, name: "Shaper's Touch
				if(result[i].id == 390){
					bigJson['shaper']['Shapers Touch'].chaosValue = result[i].mean;
				}
				//id: 79, name: "Crown of the Inward Eye"
				if(result[i].id == 79){
					bigJson['sirus']['Crown of the Inward Eye'].chaosValue = result[i].mean;
				}
				// id: 997, name: "Hands of the High Templar
				if(result[i].id == 997){
					bigJson['sirus']['Hands of the High Templar'].chaosValue = result[i].mean;
				}
				// id: 47933, name: "Inextricable Fate"
				if(result[i].id == 47933){
					bigJson['eater']['Inextricable Fate'].chaosValue = result[i].mean;
				}
				// id: 47926, name: "Dawnbreaker"
				if(result[i].id == 47926){
					bigJson['exarch']['Dawnbreaker'].chaosValue = result[i].mean;
				}
				// id: 35738, name: "Legacy of Fury"
				if(result[i].id == 35738){
					bigJson['maven']['Legacy of Fury'].chaosValue = result[i].mean;
				}
				//id: 35839, name: "Viridi's Veil"
				if(result[i].id == 35839){
					bigJson['maven']['Viridis Veil'].chaosValue = result[i].mean;
				}
				// id: 35977, name: "Doppelgänger Guise"
				if(result[i].id == 35977){
					bigJson['maven']['Doppelgänger Guise'].chaosValue = result[i].mean;
				}
				// id: 817, name: "Atziri's Step
				if(result[i].id == 817){
					bigJson['atziri']['Atziris Step'].chaosValue = result[i].mean;
					//bigJson['uber atziri']['Atziris Step'].chaosValue = result[i].mean;
				}
				// id: 3010, name: "Atziri's Reflection",
				if(result[i].id == 3010){
					bigJson['uber atziri']['Atziris Reflection'].chaosValue = result[i].mean;
				}
				// id: 68, name: "The Vertex"
				if(result[i].id == 68){
					bigJson['uber atziri']['The Vertex'].chaosValue = result[i].mean;
				}
				// id: 737, name: "Atziri's Splendour"
				if(result[i].id == 737){
					bigJson['uber atziri']['Atziris Splendour'].chaosValue = result[i].mean;
				}
				// id: 158, name: "Atziri's Acuity"
				if(result[i].id == 158){
					bigJson['uber atziri']['Atziris Acuity'].chaosValue = result[i].mean;
				}
				// 47946, name: "Soul Ascension"
				if(result[i].id == 47946){
					bigJson['uber elder']['Soul Ascension'].chaosValue = result[i].mean;
				}
				// id: 825, name: "Voidwalker"
				if(result[i].id == 825){
					bigJson['shaper']['Voidwalker'].chaosValue = result[i].mean;
				}
				//  id: 47925, name: "Echoes of Creation"
				if(result[i].id == 47925){
					bigJson['shaper']['Echoes of Creation'].chaosValue = result[i].mean;
				}
			}
		});
};

async function getUniqueAccessories(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=accessory";
	fetch(url).then(response => response.json()).then(result => {
			for(var i = 0; i<result.length;i++){
				//id: 1797 Cyclopean Coil
				if(result[i].id == 1797 ){
					bigJson['elder']['Cyclopean Coil'].chaosValue = result[i].mean;
				}
				// id: 1570, name: "Impresence"
				if(result[i].id == 1570 ){
					bigJson['elder']['Any Impresence'].chaosValue = result[i].mean;
				}
				//  id: 653, name: "Mark of the Shaper
				if(result[i].id == 653 ){
					bigJson['uber elder']['Mark of the Shaper'].chaosValue = result[i].mean;
				}
				// id: 1706, name: "Mark of the Elder"
				if(result[i].id == 1706 ){
					bigJson['uber elder']['Mark of the Elder'].chaosValue = result[i].mean;
				}
				//  id: 46489, name: "Call of the Void"
				if(result[i].id == 46489 ){
					bigJson['uber elder']['Call of the Void'].chaosValue = result[i].mean;
				}
				//id: 1817, name: "Solstice Vigil
				if(result[i].id == 1817){
					bigJson['shaper']['Solstice Vigil'].chaosValue = result[i].mean;
				}
				//d: 46481, name: "The Burden of Truth"
				if(result[i].id == 46481){
					bigJson['sirus']['The Burden of Truth'].chaosValue = result[i].mean;
				}
				//id: 45853, name: "Ashes of the Stars
				if(result[i].id == 46481){
					bigJson['eater']['Ashes of the Stars'].chaosValue = result[i].mean;
				}
				//id: 45868, name: "Crystallised Omniscience
				if(result[i].id == 45868){
					bigJson['exarch']['Crystallised Omniscience'].chaosValue = result[i].mean;
				}
				//  id: 35689, name: "Arn's Anguish"
				if(result[i].id == 35689){
					bigJson['maven']['Arns Anguish'].chaosValue = result[i].mean;
				}
				// id: 35780, name: "Graven's Secret"
				if(result[i].id == 35780){
					bigJson['maven']['Gravens Secret'].chaosValue = result[i].mean;
				}
				//  id: 35759, name: "Olesya's Delight
				if(result[i].id == 35759){
					bigJson['maven']['Olesyas Delight'].chaosValue = result[i].mean;
				}
				// id: 42126, name: "Triumvirate Authority
				if(result[i].id == 42126){
					bigJson['atziri']['Triumvirate Authority'].chaosValue = result[i].mean;
					bigJson['uber atziri']['Triumvirate Authority'].chaosValue = result[i].mean;
				}
				// id: 672, name: "Doryani's Invitation
				if(result[i].id == 672){
					bigJson['atziri']['Doryanis Invitation'].chaosValue = result[i].mean;
				}
			}
		});
};

async function getUniqueWeapons(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=weapon";
	fetch(url).then(response => response.json()).then(result => {
			for(var i = 0; i<result.length;i++){
				//id: 1618, name: "Nebuloch"
				if(result[i].id == 1618 ){
					bigJson['elder']['Nebuloch'].chaosValue = result[i].mean;
				}
				// id: 2338, name: "Hopeshredder"
				if(result[i].id == 2338 ){
					bigJson['elder']['Hopeshredder'].chaosValue = result[i].mean;
				}
				// id: 2486, name: Shimmeron
				if(result[i].id == 2486 ){
					bigJson['elder']['Shimmeron'].chaosValue = result[i].mean;
				}
				// id: 2515, name: "Disintegrator
				if(result[i].id == 2515 ){
					bigJson['uber elder']['Disintegrator'].chaosValue = result[i].mean;
				}
				//id: 34783, name: "Voidforge"
				if(result[i].id == 34783 ){
					bigJson['uber elder']['Voidforge'].chaosValue = result[i].mean;
				}
				//id: 231, name: "Starforge
				if(result[i].id == 231){
					bigJson['shaper']['Starforge'].chaosValue = result[i].mean;
				}
				// id: 48005, name: "The Gluttonous Tide
				if(result[i].id == 48005){
					bigJson['eater']['The Gluttonous Tide'].chaosValue = result[i].mean;
				}
				// id: 47960, name: "The Annihilating Light"
				if(result[i].id == 47960){
					bigJson['exarch']['The Annihilating Light'].chaosValue = result[i].mean;
				}
				//  id: 2082, name: "Doryani's Catalyst
				if(result[i].id == 2082){
					bigJson['atziri']['Doryanis Catalyst'].chaosValue = result[i].mean;
					//bigJson['uber atziri']['Doryanis Catalyst'].chaosValue = result[i].mean;
				}
				//  id: 788, name: "Atziri's Disfavour",
				if(result[i].id == 788){
					bigJson['atziri']['Atziris Disfavour'].chaosValue = result[i].mean;
					//bigJson['uber atziri']['Atziris Disfavour'].chaosValue = result[i].mean;
				}
				// id: 47958, name: "Atziri's Rule",
				if(result[i].id == 47958){
					bigJson['uber atziri']['Atziris Rule'].chaosValue = result[i].mean;
				}
				//id: 2911, name: "Pledge of Hands
				if(result[i].id == 2911){
					bigJson['uber atziri']['Pledge of Hands'].chaosValue = result[i].mean;
				}
				//  id: 1211, name: "The Saviour"
				if(result[i].id == 1211){
					bigJson['sirus']['The Saviour'].chaosValue = result[i].mean;
				}
			}
		});
};

async function getUniqueFlaskValues(){
	var url = "https://api.poe.watch/get?league="+currentLeague+"&category=flask";
	fetch(url).then(response => response.json()).then(result => {
		for(var i = 0; i<result.length;i++){
			// id: 258, name: "Dying Sun
			if(result[i].id == 258){
					bigJson['shaper']['Dying Sun'].chaosValue = result[i].mean;
			}
			//id: 1229, name: "Atziri's Promise"
			if(result[i].id == 1229){
					bigJson['atziri']['Atziris Promise'].chaosValue = result[i].mean;
					//bigJson['uber atziri']['Atziris Promise'].chaosValue = result[i].mean;
			}
		}
	});
};


async function SetCostForNotAvailableItems(){
	//atziri & uber Atziri: Sacrificial Garb
	bigJson['atziri']['Sacrificial Garb'].chaosValue = 0;
	bigJson['uber atziri']['Sacrificial Garb'].chaosValue = 0;
	//sirus: Thread of Hope (massive)
	bigJson['sirus']['Thread of Hope (massive)'].chaosValue = 0;
	// uber uber elder impresence
	bigJson['uber elder']['Any Double Impresence'].chaosValue = 0;
}

function fillBigJson(){
	SetCostForNotAvailableItems();
	getFragmentValues();
	getCurrencyValues();
	getMapValues();
	getJewelValues();
	getUniqueArmorValues();
	getUniqueAccessories();
	getUniqueWeapons();
	getUniqueFlaskValues();
	calculateAverageAwakenedGem();
}



function calculateValue(boss){
	console.log(bigJson[boss])
	let cost = bigJson[boss]['setCost'];
	let drops = 0;	
	for(let i = 0; i < Object.keys(bigJson[boss]).length; i++){
		if(Object.keys(bigJson[boss])[i] == 'setCost'){
		}else{
			drops +=  (bigJson[boss][Object.keys(bigJson[boss])[i]].dropChance * bigJson[boss][Object.keys(bigJson[boss])[i]].chaosValue / 100);
		}
	}	
	return Math.floor(drops-cost);
};


function fillValues(){
	document.getElementById('elder').innerHTML = calculateValue('elder');
	document.getElementById('uberElder').innerHTML = calculateValue('uber elder');
	document.getElementById('shaper').innerHTML = calculateValue('shaper');
	document.getElementById('sirus').innerHTML = calculateValue('sirus');
	document.getElementById('eater').innerHTML = calculateValue('eater');
	document.getElementById('exarch').innerHTML = calculateValue('exarch');
	document.getElementById('atziri').innerHTML = calculateValue('atziri');
	document.getElementById('uberAtziri').innerHTML = calculateValue('uber atziri');
	document.getElementById('maven').innerHTML = calculateValue('maven');
};



fillBigJson();



setTimeout(fillValues, 250);
	
/*
Promise.all([
    this.SetCostForNotAvailableItems(),
	this.getFragmentValues(),
	this.getCurrencyValues(),
	this.getMapValues(),
	this.getJewelValues(),
	this.getUniqueArmorValues(),
	this.getUniqueAccessories(),
	this.getUniqueWeapons(),
	this.getUniqueFlaskValues(),
	this.calculateAverageAwakenedGem()
	])
.then(function(values) {
    this.fillValues();
}.bind(this));
*/